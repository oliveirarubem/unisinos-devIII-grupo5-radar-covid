(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"+KPJ":function(e,i,o){"use strict";o.r(i),o.d(i,"ProfilePageModule",(function(){return v}));var t=o("ofXK"),n=o("3Pt+"),r=o("TEn/"),s=o("tyNb"),a=o("XNiG"),c=o("nYR2"),l=o("1G5W"),b=o("mR7G"),u=o("fXoL"),d=o("1Bz9"),h=o("cRds"),m=o("TZpv");const p=[{path:"",component:(()=>{class e{constructor(e,i,o,t,r){this.fb=e,this.router=i,this.userService=o,this.spinnerService=t,this.notificationService=r,this._uns$=new a.a,this.userEmailVal=new n.b("",n.l.compose([n.l.required,n.l.email,n.l.minLength(10)])),this.nickNameVal=new n.b("",n.l.compose([n.l.required]))}ngOnInit(){this.createInitialForm()}ionViewWillLeave(){this._uns$.next(),this._uns$.complete()}ionViewWillEnter(){this.loadData()}createInitialForm(){this.userForm=this.fb.group({userEmail:this.userEmailVal,nickName:this.nickNameVal})}loadData(){var e,i;this.user=this.userService.user,this.userForm.controls.userEmail.setValue(this.user.email),this.userForm.controls.nickName.setValue(null===(i=null===(e=this.user)||void 0===e?void 0:e.data)||void 0===i?void 0:i.nomeApelido)}save(){this.spinnerService.showLoading("Salvando dados..."),this.userService.update(this.userForm.value.userEmail,this.userForm.value.nickName).pipe(Object(c.a)(()=>{this.spinnerService.dismissLoading()}),Object(l.a)(this._uns$)).subscribe(e=>{!0===e?this.goToHome():this.notificationService.showInfo("N\xe3o foi poss\xedvel atualizar as informa\xe7\xf5es","N\xe3o localizamos um registro v\xe1lido ap\xf3s a atualiza\xe7\xe3o. Favor efetue o processo novamente.")})}clear(){this.userForm.reset()}cancel(){this.createInitialForm(),this.clear(),this.goToHome()}goToHome(){this.userService.hasRegions()?this.router.navigateByUrl(b.a.favorite.home):this.router.navigateByUrl(b.a.favorite.create).finally(()=>this.clear())}delete(){this.spinnerService.showLoading("Excluindo perfil..."),this.userService.delete().pipe(Object(c.a)(()=>{this.spinnerService.dismissLoading()}),Object(l.a)(this._uns$)).subscribe(()=>{this.router.navigateByUrl(b.a.login)})}}return e.\u0275fac=function(i){return new(i||e)(u.Hb(n.a),u.Hb(s.g),u.Hb(d.a),u.Hb(h.a),u.Hb(m.a))},e.\u0275cmp=u.Bb({type:e,selectors:[["app-profile"]],decls:39,vars:3,consts:[[3,"translucent"],["color","primary"],["slot","start"],["size","12"],["novalidate","",3,"formGroup"],["position","floating"],["formControlName","userEmail","type","text"],["formControlName","nickName","type","text"],["expand","block",3,"disabled","click"],["size","12","sizeSm","8"],["color","light","expand","block",3,"click"],["size","12","sizeSm","4"],["color","danger","expand","block",3,"click"]],template:function(e,i){1&e&&(u.Mb(0,"ion-header",0),u.Mb(1,"ion-toolbar",1),u.Mb(2,"ion-buttons",2),u.Ib(3,"ion-menu-button"),u.Lb(),u.Mb(4,"ion-title"),u.mc(5,"Perfil"),u.Lb(),u.Lb(),u.Lb(),u.Mb(6,"ion-content"),u.Mb(7,"ion-grid"),u.Mb(8,"ion-row"),u.Mb(9,"ion-col",3),u.Mb(10,"ion-card"),u.Mb(11,"ion-card-header"),u.Mb(12,"h2"),u.mc(13,"Seus dados no RadarCovid"),u.Lb(),u.Lb(),u.Mb(14,"ion-card-content"),u.Mb(15,"form",4),u.Mb(16,"ion-item"),u.Mb(17,"ion-label",5),u.mc(18,"E-mail"),u.Lb(),u.Ib(19,"ion-input",6),u.Lb(),u.Mb(20,"ion-item"),u.Mb(21,"ion-label",5),u.mc(22,"Apelido/Nome"),u.Lb(),u.Ib(23,"ion-input",7),u.Lb(),u.Lb(),u.Lb(),u.Mb(24,"ion-row"),u.Mb(25,"ion-col",3),u.Mb(26,"ion-button",8),u.Ub("click",(function(){return i.save()})),u.mc(27," Salvar "),u.Lb(),u.Lb(),u.Lb(),u.Mb(28,"ion-row"),u.Mb(29,"ion-col",9),u.Mb(30,"ion-button",10),u.Ub("click",(function(){return i.clear()})),u.mc(31," Limpar "),u.Lb(),u.Lb(),u.Mb(32,"ion-col",11),u.Mb(33,"ion-button",10),u.Ub("click",(function(){return i.cancel()})),u.mc(34," Cancelar "),u.Lb(),u.Lb(),u.Lb(),u.Mb(35,"ion-row"),u.Mb(36,"ion-col",3),u.Mb(37,"ion-button",12),u.Ub("click",(function(){return i.delete()})),u.mc(38," Excluir meus dados do RadarCovid "),u.Lb(),u.Lb(),u.Lb(),u.Lb(),u.Lb(),u.Lb(),u.Lb(),u.Lb()),2&e&&(u.bc("translucent",!0),u.xb(15),u.bc("formGroup",i.userForm),u.xb(11),u.bc("disabled",i.userForm.invalid))},directives:[r.o,r.I,r.c,r.z,r.H,r.j,r.n,r.D,r.i,r.d,r.f,r.e,n.m,n.i,n.d,r.t,r.w,r.s,r.R,n.h,n.c,r.b],styles:[""]}),e})()}];let f=(()=>{class e{}return e.\u0275mod=u.Fb({type:e}),e.\u0275inj=u.Eb({factory:function(i){return new(i||e)},imports:[[s.i.forChild(p)],s.i]}),e})(),v=(()=>{class e{}return e.\u0275mod=u.Fb({type:e}),e.\u0275inj=u.Eb({factory:function(i){return new(i||e)},imports:[[t.b,n.e,n.k,r.K,f]]}),e})()},TZpv:function(e,i,o){"use strict";o.d(i,"a",(function(){return s}));var t=o("mrSG"),n=o("fXoL"),r=o("TEn/");let s=(()=>{class e{constructor(e){this.toastCtrl=e}showInfo(e,i){this.presentToast(`${e}\n${i}`)}showError(e,i){this.presentToast(`Erro: ${e}\n${i}`)}presentToast(e){return Object(t.a)(this,void 0,void 0,(function*(){(yield this.toastCtrl.create({message:e,duration:4e3})).present()}))}}return e.\u0275fac=function(i){return new(i||e)(n.Qb(r.S))},e.\u0275prov=n.Db({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},cRds:function(e,i,o){"use strict";o.d(i,"a",(function(){return r}));var t=o("fXoL"),n=o("TEn/");let r=(()=>{class e{constructor(e){this.loading=e,this.loaderLoading=!1}showLoading(e){this.loaderLoading=!0,this.loading.create({message:e,showBackdrop:!0}).then(e=>{this.loader=e,e.present().then(()=>{this.loaderLoading=!1})})}dismissLoading(){const e=setInterval(()=>{this.loader||!this.loaderLoading?this.loader.dismiss().then(()=>{this.loader=null,clearInterval(e)}):this.loader||this.loaderLoading||clearInterval(e)},100)}}return e.\u0275fac=function(i){return new(i||e)(t.Qb(n.M))},e.\u0275prov=t.Db({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);