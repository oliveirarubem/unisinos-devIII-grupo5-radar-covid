!function(){function n(n,i){if(!(n instanceof i))throw new TypeError("Cannot call a class as a function")}function i(n,i){for(var t=0;t<i.length;t++){var e=i[t];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}function t(n,t,e){return t&&i(n.prototype,t),e&&i(n,e),n}(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{F4UR:function(i,e,o){"use strict";o.r(e),o.d(e,"LoginPageModule",(function(){return F}));var r=o("ofXK"),a=o("3Pt+"),c=o("TEn/"),s=o("tyNb"),u=o("XNiG"),l=o("nYR2"),b=o("1G5W"),f=o("mR7G"),m=o("fXoL"),h=o("1Bz9"),d=o("cRds"),v=o("TZpv"),g=["userEmailInput"],p=["nickNameInput"];function k(n,i){1&n&&(m.Mb(0,"ion-item"),m.Mb(1,"ion-label",7),m.mc(2,"Apelido/Nome"),m.Lb(),m.Ib(3,"ion-input",14,15),m.Lb())}function L(n,i){if(1&n){var t=m.Nb();m.Kb(0),m.Mb(1,"ion-col",16),m.Mb(2,"ion-button",17),m.Ub("click",(function(){return m.hc(t),m.Wb().clear()})),m.mc(3," Limpar "),m.Lb(),m.Lb(),m.Mb(4,"ion-col",18),m.Mb(5,"ion-button",17),m.Ub("click",(function(){return m.hc(t),m.Wb().cancel()})),m.mc(6," Cancelar "),m.Lb(),m.Lb(),m.Jb()}}function y(n,i){if(1&n){var t=m.Nb();m.Mb(0,"ion-col",5),m.Mb(1,"ion-button",17),m.Ub("click",(function(){return m.hc(t),m.Wb().clear()})),m.mc(2," Limpar "),m.Lb(),m.Lb()}}var w,I,M,E=[{path:"",component:(w=function(){function i(t,e,o,r,c){n(this,i),this.fb=t,this.router=e,this.userService=o,this.spinnerService=r,this.notificationService=c,this._uns$=new u.a,this.isRegistration=!1,this.userEmailVal=new a.b("",a.l.compose([a.l.required,a.l.email,a.l.minLength(10)])),this.nickNameVal=new a.b("",a.l.compose([a.l.required]))}return t(i,[{key:"ngOnInit",value:function(){this.createInitialForm()}},{key:"ionViewWillEnter",value:function(){}},{key:"ionViewWillLeave",value:function(){this._uns$.next(),this._uns$.complete()}},{key:"createInitialForm",value:function(){this.loginForm=this.fb.group({userEmail:this.userEmailVal,nickName:""})}},{key:"login",value:function(){var n=this;this.loginForm.valid&&(this.spinnerService.showLoading(this.isRegistration?"Registrando...":"Identificando..."),this.isRegistration?this.userService.register(this.loginForm.value.userEmail,this.loginForm.value.nickName).pipe(Object(l.a)((function(){n.spinnerService.dismissLoading()})),Object(b.a)(this._uns$)).subscribe((function(i){!0===i?n.goToHome():(n.notificationService.showInfo("N\xe3o foi poss\xedvel registrar","N\xe3o localizamos um registro v\xe1lido ap\xf3s o registro. Favor efetue o processo novamente."),n.showRegistration())})):this.userService.login(this.loginForm.value.userEmail).pipe(Object(l.a)((function(){n.spinnerService.dismissLoading()})),Object(b.a)(this._uns$)).subscribe((function(i){!0===i?n.goToHome():(n.notificationService.showInfo("Registro n\xe3o localizado","N\xe3o localizamos um registro com o e-mail informado. Favor efetue o cadastro."),n.showRegistration())})))}},{key:"showRegistration",value:function(){var n=this;this.isRegistration=!0,this.loginForm.addControl("nickName",this.nickNameVal),setTimeout((function(){n.setFocus(n.nickNameInput)}),10)}},{key:"setFocus",value:function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:700;n&&setTimeout((function(){return n.setFocus().then()}),i)}},{key:"clear",value:function(){this.loginForm.reset(),this.setFocus(this.userEmailInput,300)}},{key:"getTitle",value:function(){return!0===this.isRegistration?"Cadastro":"Identifica\xe7\xe3o"}},{key:"cancel",value:function(){this.createInitialForm(),this.clear(),this.isRegistration=!1}},{key:"goToHome",value:function(){var n=this;this.userService.hasRegions()?this.router.navigateByUrl(f.a.favorite.home).finally((function(){return n.clear()})):this.router.navigateByUrl(f.a.favorite.create).finally((function(){return n.clear()}))}},{key:"goToAbout",value:function(){this.router.navigateByUrl(f.a.about)}}]),i}(),w.\u0275fac=function(n){return new(n||w)(m.Hb(a.a),m.Hb(s.g),m.Hb(h.a),m.Hb(d.a),m.Hb(v.a))},w.\u0275cmp=m.Bb({type:w,selectors:[["app-login"]],viewQuery:function(n,i){var t;1&n&&(m.pc(g,!0),m.pc(p,!0)),2&n&&(m.ec(t=m.Vb())&&(i.userEmailInput=t.first),m.ec(t=m.Vb())&&(i.nickNameInput=t.first))},decls:36,vars:6,consts:[["color","primary"],["color","light"],["color","medium"],["slot","end",3,"click"],["ios","alert-circle-outline","md","alert-circle-sharp","slot","start"],["size","12"],["novalidate","",3,"formGroup","keydown.enter"],["position","floating"],["formControlName","userEmail","type","text"],["userEmailInput",""],[4,"ngIf"],["expand","block",3,"disabled","click"],[4,"ngIf","ngIfElse"],["mimi",""],["formControlName","nickName","type","text"],["nickNameInput",""],["size","12","sizeSm","8"],["color","light","expand","block",3,"click"],["size","12","sizeSm","4"]],template:function(n,i){if(1&n&&(m.Mb(0,"ion-header"),m.Mb(1,"ion-toolbar",0),m.Mb(2,"ion-title"),m.mc(3,"RadarCovid "),m.Lb(),m.Mb(4,"ion-title"),m.Mb(5,"ion-note",1),m.mc(6,"Os casos da Covid-19 das suas cidades favoritas"),m.Lb(),m.Lb(),m.Mb(7,"ion-title"),m.Mb(8,"ion-note",2),m.mc(9,"Unisinos - DSIII - Grupo 5"),m.Lb(),m.Lb(),m.Mb(10,"ion-buttons",3),m.Ub("click",(function(){return i.goToAbout()})),m.Ib(11,"ion-icon",4),m.Lb(),m.Lb(),m.Lb(),m.Mb(12,"ion-content"),m.Mb(13,"ion-grid"),m.Mb(14,"ion-row"),m.Mb(15,"ion-col",5),m.Mb(16,"ion-card"),m.Mb(17,"ion-card-header"),m.Mb(18,"h2"),m.mc(19),m.Lb(),m.Lb(),m.Mb(20,"ion-card-content"),m.Mb(21,"form",6),m.Ub("keydown.enter",(function(){return i.login()})),m.Mb(22,"ion-item"),m.Mb(23,"ion-label",7),m.mc(24,"E-mail"),m.Lb(),m.Ib(25,"ion-input",8,9),m.Lb(),m.kc(27,k,5,0,"ion-item",10),m.Lb(),m.Lb(),m.Mb(28,"ion-row"),m.Mb(29,"ion-col",5),m.Mb(30,"ion-button",11),m.Ub("click",(function(){return i.login()})),m.mc(31," Entrar "),m.Lb(),m.Lb(),m.Lb(),m.Mb(32,"ion-row"),m.kc(33,L,7,0,"ng-container",12),m.kc(34,y,3,0,"ng-template",null,13,m.lc),m.Lb(),m.Lb(),m.Lb(),m.Lb(),m.Lb(),m.Lb()),2&n){var t=m.fc(35);m.xb(19),m.nc(i.getTitle()),m.xb(2),m.bc("formGroup",i.loginForm),m.xb(6),m.bc("ngIf",i.isRegistration),m.xb(3),m.bc("disabled",i.loginForm.invalid),m.xb(3),m.bc("ngIf",i.isRegistration)("ngIfElse",t)}},directives:[c.o,c.I,c.H,c.B,c.c,c.p,c.j,c.n,c.D,c.i,c.d,c.f,c.e,a.m,a.i,a.d,c.t,c.w,c.s,c.R,a.h,a.c,r.k,c.b],styles:[""]}),w)}],R=((M=function i(){n(this,i)}).\u0275mod=m.Fb({type:M}),M.\u0275inj=m.Eb({factory:function(n){return new(n||M)},imports:[[s.i.forChild(E)],s.i]}),M),F=((I=function i(){n(this,i)}).\u0275mod=m.Fb({type:I}),I.\u0275inj=m.Eb({factory:function(n){return new(n||I)},imports:[[r.b,a.e,a.k,c.K,R,s.i]]}),I)},TZpv:function(i,e,o){"use strict";o.d(e,"a",(function(){return s}));var r=o("mrSG"),a=o("fXoL"),c=o("TEn/"),s=function(){var i=function(){function i(t){n(this,i),this.toastCtrl=t}return t(i,[{key:"showInfo",value:function(n,i){this.presentToast("".concat(n,"\n").concat(i))}},{key:"showError",value:function(n,i){this.presentToast("Erro: ".concat(n,"\n").concat(i))}},{key:"presentToast",value:function(n){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,this.toastCtrl.create({message:n,duration:4e3});case 2:i.sent.present();case 3:case"end":return i.stop()}}),i,this)})))}}]),i}();return i.\u0275fac=function(n){return new(n||i)(a.Qb(c.S))},i.\u0275prov=a.Db({token:i,factory:i.\u0275fac,providedIn:"root"}),i}()},cRds:function(i,e,o){"use strict";o.d(e,"a",(function(){return c}));var r=o("fXoL"),a=o("TEn/"),c=function(){var i=function(){function i(t){n(this,i),this.loading=t,this.loaderLoading=!1}return t(i,[{key:"showLoading",value:function(n){var i=this;this.loaderLoading=!0,this.loading.create({message:n,showBackdrop:!0}).then((function(n){i.loader=n,n.present().then((function(){i.loaderLoading=!1}))}))}},{key:"dismissLoading",value:function(){var n=this,i=setInterval((function(){n.loader||!n.loaderLoading?n.loader.dismiss().then((function(){n.loader=null,clearInterval(i)})):n.loader||n.loaderLoading||clearInterval(i)}),100)}}]),i}();return i.\u0275fac=function(n){return new(n||i)(r.Qb(a.M))},i.\u0275prov=r.Db({token:i,factory:i.\u0275fac,providedIn:"root"}),i}()}}])}();