(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{F4UR:function(i,o,t){"use strict";t.r(o),t.d(o,"LoginPageModule",(function(){return I}));var n=t("ofXK"),e=t("3Pt+"),r=t("TEn/"),s=t("tyNb"),a=t("XNiG"),c=t("nYR2"),l=t("1G5W"),b=t("mR7G"),u=t("fXoL"),d=t("1Bz9"),m=t("cRds"),h=t("TZpv");const g=["userEmailInput"],f=["nickNameInput"];function p(i,o){1&i&&(u.Mb(0,"ion-item"),u.Mb(1,"ion-label",9),u.mc(2,"Apelido/Nome"),u.Lb(),u.Ib(3,"ion-input",16,17),u.Lb())}function v(i,o){if(1&i){const i=u.Nb();u.Kb(0),u.Mb(1,"ion-col",18),u.Mb(2,"ion-button",19),u.Ub("click",(function(){return u.hc(i),u.Wb().clear()})),u.mc(3," Limpar "),u.Lb(),u.Lb(),u.Mb(4,"ion-col",20),u.Mb(5,"ion-button",19),u.Ub("click",(function(){return u.hc(i),u.Wb().cancel()})),u.mc(6," Cancelar "),u.Lb(),u.Lb(),u.Jb()}}function L(i,o){if(1&i){const i=u.Nb();u.Mb(0,"ion-col",7),u.Mb(1,"ion-button",19),u.Ub("click",(function(){return u.hc(i),u.Wb().clear()})),u.mc(2," Limpar "),u.Lb(),u.Lb()}}const M=[{path:"",component:(()=>{class i{constructor(i,o,t,n,r){this.fb=i,this.router=o,this.userService=t,this.spinnerService=n,this.notificationService=r,this._uns$=new a.a,this.isRegistration=!1,this.userEmailVal=new e.b("",e.l.compose([e.l.required,e.l.email,e.l.minLength(10)])),this.nickNameVal=new e.b("",e.l.compose([e.l.required]))}ngOnInit(){this.createInitialForm()}ionViewWillEnter(){}ionViewWillLeave(){this._uns$.next(),this._uns$.complete()}createInitialForm(){this.loginForm=this.fb.group({userEmail:this.userEmailVal,nickName:""})}login(){this.loginForm.valid&&(this.spinnerService.showLoading(this.isRegistration?"Registrando...":"Identificando..."),this.isRegistration?this.userService.register(this.loginForm.value.userEmail,this.loginForm.value.nickName).pipe(Object(c.a)(()=>{this.spinnerService.dismissLoading()}),Object(l.a)(this._uns$)).subscribe(i=>{!0===i?this.goToHome():(this.notificationService.showInfo("N\xe3o foi poss\xedvel registrar","N\xe3o localizamos um registro v\xe1lido ap\xf3s o registro. Favor efetue o processo novamente."),this.showRegistration())}):this.userService.login(this.loginForm.value.userEmail).pipe(Object(c.a)(()=>{this.spinnerService.dismissLoading()}),Object(l.a)(this._uns$)).subscribe(i=>{!0===i?this.goToHome():(this.notificationService.showInfo("Registro n\xe3o localizado","N\xe3o localizamos um registro com o e-mail informado. Favor efetue o cadastro."),this.showRegistration())}))}showRegistration(){this.isRegistration=!0,this.loginForm.addControl("nickName",this.nickNameVal),setTimeout(()=>{this.setFocus(this.nickNameInput)},10)}setFocus(i,o=700){i&&setTimeout(()=>i.setFocus().then(),o)}clear(){this.loginForm.reset(),this.setFocus(this.userEmailInput,300)}getTitle(){return!0===this.isRegistration?"Cadastro":"Identifica\xe7\xe3o"}cancel(){this.createInitialForm(),this.clear(),this.isRegistration=!1}goToHome(){this.userService.hasRegions()?this.router.navigateByUrl(b.a.favorite.home).finally(()=>this.clear()):this.router.navigateByUrl(b.a.favorite.create).finally(()=>this.clear())}goToAbout(){this.router.navigateByUrl(b.a.about)}}return i.\u0275fac=function(o){return new(o||i)(u.Hb(e.a),u.Hb(s.g),u.Hb(d.a),u.Hb(m.a),u.Hb(h.a))},i.\u0275cmp=u.Bb({type:i,selectors:[["app-login"]],viewQuery:function(i,o){var t;1&i&&(u.pc(g,!0),u.pc(f,!0)),2&i&&(u.ec(t=u.Vb())&&(o.userEmailInput=t.first),u.ec(t=u.Vb())&&(o.nickNameInput=t.first))},decls:36,vars:6,consts:[["color","primary"],["slot","end",3,"click"],["ios","alert-circle-outline","md","alert-circle-sharp","slot","start"],[1,"ion-no-border"],[1,"subtitle"],["color","light"],["color","medium",1,"uni"],["size","12"],["novalidate","",3,"formGroup","keydown.enter"],["position","floating"],["formControlName","userEmail","type","text"],["userEmailInput",""],[4,"ngIf"],["expand","block",3,"disabled","click"],[4,"ngIf","ngIfElse"],["mimi",""],["formControlName","nickName","type","text"],["nickNameInput",""],["size","12","sizeSm","8"],["color","light","expand","block",3,"click"],["size","12","sizeSm","4"]],template:function(i,o){if(1&i&&(u.Mb(0,"ion-header"),u.Mb(1,"ion-toolbar",0),u.Mb(2,"ion-title"),u.mc(3,"RadarCovid "),u.Lb(),u.Mb(4,"ion-buttons",1),u.Ub("click",(function(){return o.goToAbout()})),u.Ib(5,"ion-icon",2),u.Lb(),u.Lb(),u.Mb(6,"ion-toolbar",3),u.Mb(7,"div",4),u.Mb(8,"ion-note",5),u.mc(9,"Os casos da Covid-19 das suas cidades favoritas"),u.Lb(),u.Mb(10,"ion-note",6),u.mc(11,"Unisinos - DSIII - Grupo 5"),u.Lb(),u.Lb(),u.Lb(),u.Lb(),u.Mb(12,"ion-content"),u.Mb(13,"ion-grid"),u.Mb(14,"ion-row"),u.Mb(15,"ion-col",7),u.Mb(16,"ion-card"),u.Mb(17,"ion-card-header"),u.Mb(18,"h2"),u.mc(19),u.Lb(),u.Lb(),u.Mb(20,"ion-card-content"),u.Mb(21,"form",8),u.Ub("keydown.enter",(function(){return o.login()})),u.Mb(22,"ion-item"),u.Mb(23,"ion-label",9),u.mc(24,"E-mail"),u.Lb(),u.Ib(25,"ion-input",10,11),u.Lb(),u.kc(27,p,5,0,"ion-item",12),u.Lb(),u.Lb(),u.Mb(28,"ion-row"),u.Mb(29,"ion-col",7),u.Mb(30,"ion-button",13),u.Ub("click",(function(){return o.login()})),u.mc(31," Entrar "),u.Lb(),u.Lb(),u.Lb(),u.Mb(32,"ion-row"),u.kc(33,v,7,0,"ng-container",14),u.kc(34,L,3,0,"ng-template",null,15,u.lc),u.Lb(),u.Lb(),u.Lb(),u.Lb(),u.Lb(),u.Lb()),2&i){const i=u.fc(35);u.xb(19),u.nc(o.getTitle()),u.xb(2),u.bc("formGroup",o.loginForm),u.xb(6),u.bc("ngIf",o.isRegistration),u.xb(3),u.bc("disabled",o.loginForm.invalid),u.xb(3),u.bc("ngIf",o.isRegistration)("ngIfElse",i)}},directives:[r.o,r.I,r.H,r.c,r.p,r.B,r.j,r.n,r.D,r.i,r.d,r.f,r.e,e.m,e.i,e.d,r.t,r.w,r.s,r.R,e.h,e.c,n.k,r.b],styles:[".ion-no-border[_ngcontent-%COMP%]{--border-width:0 0 0px;--border-style:solid;--border-color:var(--ion-color-danger);--background:var(--ion-color-primary)}.subtitle[_ngcontent-%COMP%]{display:flex;flex-direction:column;text-align:center}.subtitle[_ngcontent-%COMP%]   .uni[_ngcontent-%COMP%]{color:var(--ion-color-medium-tint);font-weight:700}"]}),i})()}];let w=(()=>{class i{}return i.\u0275mod=u.Fb({type:i}),i.\u0275inj=u.Eb({factory:function(o){return new(o||i)},imports:[[s.i.forChild(M)],s.i]}),i})(),I=(()=>{class i{}return i.\u0275mod=u.Fb({type:i}),i.\u0275inj=u.Eb({factory:function(o){return new(o||i)},imports:[[n.b,e.e,e.k,r.K,w,s.i]]}),i})()},TZpv:function(i,o,t){"use strict";t.d(o,"a",(function(){return s}));var n=t("mrSG"),e=t("fXoL"),r=t("TEn/");let s=(()=>{class i{constructor(i){this.toastCtrl=i}showInfo(i,o){this.presentToast(`${i}\n${o}`)}showError(i,o){this.presentToast(`Erro: ${i}\n${o}`)}presentToast(i){return Object(n.a)(this,void 0,void 0,(function*(){(yield this.toastCtrl.create({message:i,duration:4e3})).present()}))}}return i.\u0275fac=function(o){return new(o||i)(e.Qb(r.S))},i.\u0275prov=e.Db({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()},cRds:function(i,o,t){"use strict";t.d(o,"a",(function(){return r}));var n=t("fXoL"),e=t("TEn/");let r=(()=>{class i{constructor(i){this.loading=i,this.loaderLoading=!1}showLoading(i){this.loaderLoading=!0,this.loading.create({message:i,showBackdrop:!0}).then(i=>{this.loader=i,i.present().then(()=>{this.loaderLoading=!1})})}dismissLoading(){const i=setInterval(()=>{this.loader||!this.loaderLoading?this.loader.dismiss().then(()=>{this.loader=null,clearInterval(i)}):this.loader||this.loaderLoading||clearInterval(i)},100)}}return i.\u0275fac=function(o){return new(o||i)(n.Qb(e.M))},i.\u0275prov=n.Db({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()}}]);