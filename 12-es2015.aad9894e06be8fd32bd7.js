(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{F4UR:function(i,t,o){"use strict";o.r(t),o.d(t,"LoginPageModule",(function(){return M}));var e=o("ofXK"),n=o("3Pt+"),r=o("TEn/"),s=o("tyNb"),a=o("XNiG"),c=o("nYR2"),l=o("1G5W"),b=o("mR7G"),u=o("fXoL"),m=o("1Bz9"),h=o("cRds"),d=o("TZpv");const f=["userEmailInput"],g=["nickNameInput"];function p(i,t){1&i&&(u.Mb(0,"ion-item"),u.Mb(1,"ion-label",7),u.mc(2,"Apelido/Nome"),u.Lb(),u.Ib(3,"ion-input",14,15),u.Lb())}function v(i,t){if(1&i){const i=u.Nb();u.Kb(0),u.Mb(1,"ion-col",16),u.Mb(2,"ion-button",17),u.Ub("click",(function(){return u.hc(i),u.Wb().clear()})),u.mc(3," Limpar "),u.Lb(),u.Lb(),u.Mb(4,"ion-col",18),u.Mb(5,"ion-button",17),u.Ub("click",(function(){return u.hc(i),u.Wb().cancel()})),u.mc(6," Cancelar "),u.Lb(),u.Lb(),u.Jb()}}function L(i,t){if(1&i){const i=u.Nb();u.Mb(0,"ion-col",5),u.Mb(1,"ion-button",17),u.Ub("click",(function(){return u.hc(i),u.Wb().clear()})),u.mc(2," Limpar "),u.Lb(),u.Lb()}}const I=[{path:"",component:(()=>{class i{constructor(i,t,o,e,r){this.fb=i,this.router=t,this.userService=o,this.spinnerService=e,this.notificationService=r,this._uns$=new a.a,this.isRegistration=!1,this.userEmailVal=new n.b("",n.l.compose([n.l.required,n.l.email,n.l.minLength(10)])),this.nickNameVal=new n.b("",n.l.compose([n.l.required]))}ngOnInit(){this.createInitialForm()}ionViewWillEnter(){}ionViewWillLeave(){this._uns$.next(),this._uns$.complete()}createInitialForm(){this.loginForm=this.fb.group({userEmail:this.userEmailVal,nickName:""})}login(){this.loginForm.valid&&(this.spinnerService.showLoading(this.isRegistration?"Registrando...":"Identificando..."),this.isRegistration?this.userService.register(this.loginForm.value.userEmail,this.loginForm.value.nickName).pipe(Object(c.a)(()=>{this.spinnerService.dismissLoading()}),Object(l.a)(this._uns$)).subscribe(i=>{!0===i?this.goToHome():(this.notificationService.showInfo("N\xe3o foi poss\xedvel registrar","N\xe3o localizamos um registro v\xe1lido ap\xf3s o registro. Favor efetue o processo novamente."),this.showRegistration())}):this.userService.login(this.loginForm.value.userEmail).pipe(Object(c.a)(()=>{this.spinnerService.dismissLoading()}),Object(l.a)(this._uns$)).subscribe(i=>{!0===i?this.goToHome():(this.notificationService.showInfo("Registro n\xe3o localizado","N\xe3o localizamos um registro com o e-mail informado. Favor efetue o cadastro."),this.showRegistration())}))}showRegistration(){this.isRegistration=!0,this.loginForm.addControl("nickName",this.nickNameVal),setTimeout(()=>{this.setFocus(this.nickNameInput)},10)}setFocus(i,t=700){i&&setTimeout(()=>i.setFocus().then(),t)}clear(){this.loginForm.reset(),this.setFocus(this.userEmailInput,300)}getTitle(){return!0===this.isRegistration?"Cadastro":"Identifica\xe7\xe3o"}cancel(){this.createInitialForm(),this.clear(),this.isRegistration=!1}goToHome(){this.userService.hasRegions()?this.router.navigateByUrl(b.a.favorite.home).finally(()=>this.clear()):this.router.navigateByUrl(b.a.favorite.create).finally(()=>this.clear())}goToAbout(){this.router.navigateByUrl(b.a.about)}}return i.\u0275fac=function(t){return new(t||i)(u.Hb(n.a),u.Hb(s.g),u.Hb(m.a),u.Hb(h.a),u.Hb(d.a))},i.\u0275cmp=u.Bb({type:i,selectors:[["app-login"]],viewQuery:function(i,t){var o;1&i&&(u.pc(f,!0),u.pc(g,!0)),2&i&&(u.ec(o=u.Vb())&&(t.userEmailInput=o.first),u.ec(o=u.Vb())&&(t.nickNameInput=o.first))},decls:36,vars:6,consts:[["color","primary"],["color","light"],["color","medium"],["slot","end",3,"click"],["ios","alert-circle-outline","md","alert-circle-sharp","slot","start"],["size","12"],["novalidate","",3,"formGroup","keydown.enter"],["position","floating"],["formControlName","userEmail","type","text"],["userEmailInput",""],[4,"ngIf"],["expand","block",3,"disabled","click"],[4,"ngIf","ngIfElse"],["mimi",""],["formControlName","nickName","type","text"],["nickNameInput",""],["size","12","sizeSm","8"],["color","light","expand","block",3,"click"],["size","12","sizeSm","4"]],template:function(i,t){if(1&i&&(u.Mb(0,"ion-header"),u.Mb(1,"ion-toolbar",0),u.Mb(2,"ion-title"),u.mc(3,"RadarCovid "),u.Lb(),u.Mb(4,"ion-title"),u.Mb(5,"ion-note",1),u.mc(6,"Os casos da Covid-19 das suas cidades favoritas"),u.Lb(),u.Lb(),u.Mb(7,"ion-title"),u.Mb(8,"ion-note",2),u.mc(9,"Unisinos - DSIII - Grupo 5"),u.Lb(),u.Lb(),u.Mb(10,"ion-buttons",3),u.Ub("click",(function(){return t.goToAbout()})),u.Ib(11,"ion-icon",4),u.Lb(),u.Lb(),u.Lb(),u.Mb(12,"ion-content"),u.Mb(13,"ion-grid"),u.Mb(14,"ion-row"),u.Mb(15,"ion-col",5),u.Mb(16,"ion-card"),u.Mb(17,"ion-card-header"),u.Mb(18,"h2"),u.mc(19),u.Lb(),u.Lb(),u.Mb(20,"ion-card-content"),u.Mb(21,"form",6),u.Ub("keydown.enter",(function(){return t.login()})),u.Mb(22,"ion-item"),u.Mb(23,"ion-label",7),u.mc(24,"E-mail"),u.Lb(),u.Ib(25,"ion-input",8,9),u.Lb(),u.kc(27,p,5,0,"ion-item",10),u.Lb(),u.Lb(),u.Mb(28,"ion-row"),u.Mb(29,"ion-col",5),u.Mb(30,"ion-button",11),u.Ub("click",(function(){return t.login()})),u.mc(31," Entrar "),u.Lb(),u.Lb(),u.Lb(),u.Mb(32,"ion-row"),u.kc(33,v,7,0,"ng-container",12),u.kc(34,L,3,0,"ng-template",null,13,u.lc),u.Lb(),u.Lb(),u.Lb(),u.Lb(),u.Lb(),u.Lb()),2&i){const i=u.fc(35);u.xb(19),u.nc(t.getTitle()),u.xb(2),u.bc("formGroup",t.loginForm),u.xb(6),u.bc("ngIf",t.isRegistration),u.xb(3),u.bc("disabled",t.loginForm.invalid),u.xb(3),u.bc("ngIf",t.isRegistration)("ngIfElse",i)}},directives:[r.o,r.I,r.H,r.B,r.c,r.p,r.j,r.n,r.D,r.i,r.d,r.f,r.e,n.m,n.i,n.d,r.t,r.w,r.s,r.R,n.h,n.c,e.k,r.b],styles:[""]}),i})()}];let w=(()=>{class i{}return i.\u0275mod=u.Fb({type:i}),i.\u0275inj=u.Eb({factory:function(t){return new(t||i)},imports:[[s.i.forChild(I)],s.i]}),i})(),M=(()=>{class i{}return i.\u0275mod=u.Fb({type:i}),i.\u0275inj=u.Eb({factory:function(t){return new(t||i)},imports:[[e.b,n.e,n.k,r.K,w,s.i]]}),i})()},TZpv:function(i,t,o){"use strict";o.d(t,"a",(function(){return s}));var e=o("mrSG"),n=o("fXoL"),r=o("TEn/");let s=(()=>{class i{constructor(i){this.toastCtrl=i}showInfo(i,t){this.presentToast(`${i}\n${t}`)}showError(i,t){this.presentToast(`Erro: ${i}\n${t}`)}presentToast(i){return Object(e.a)(this,void 0,void 0,(function*(){(yield this.toastCtrl.create({message:i,duration:4e3})).present()}))}}return i.\u0275fac=function(t){return new(t||i)(n.Qb(r.S))},i.\u0275prov=n.Db({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()},cRds:function(i,t,o){"use strict";o.d(t,"a",(function(){return r}));var e=o("fXoL"),n=o("TEn/");let r=(()=>{class i{constructor(i){this.loading=i,this.loaderLoading=!1}showLoading(i){this.loaderLoading=!0,this.loading.create({message:i,showBackdrop:!0}).then(i=>{this.loader=i,i.present().then(()=>{this.loaderLoading=!1})})}dismissLoading(){const i=setInterval(()=>{this.loader||!this.loaderLoading?this.loader.dismiss().then(()=>{this.loader=null,clearInterval(i)}):this.loader||this.loaderLoading||clearInterval(i)},100)}}return i.\u0275fac=function(t){return new(t||i)(e.Qb(n.M))},i.\u0275prov=e.Db({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()}}]);